/*! Stream.js 2015-01-06 */

!function(a){"use strict";var b="0.1.0",c=function(a){var b=this,c=new d(function(a){return a},!0,a);this.add=function(a){if(null!==c){var b=c;a.prev=b,b.next=a}c=a},this.next=function(){return c.advance()},this.filter=function(a){return j(a,"predicate function argument required for filter"),this.add(new d(function(b){var c=a.call(h,b);return c?b:null})),this},this.map=function(a){return j(a,"mapper function argument required for map"),this.add(new d(function(b){return a.call(h,b)})),this},this.flatMap=function(a){return j(a,"mapper function argument required for flatMap"),this.add(new d(function(b){return a.call(h,b)},!0)),this},this.sorted=function(a){return this.add(new e({finisher:function(b){b.sort(a)}})),this},this.skip=function(a){return this.add(new e({filter:function(b,c){return c>=a}})),this},this.limit=function(a){return this.add(new e({voter:function(b,c){return a>c}})),this},this.peek=function(a){return this.add(new e({consumer:a})),this},this.distinct=function(){return this.add(new e({filter:function(a,b,c){return c.indexOf(a)<0}})),this};var m={};m.toArray=function(){for(var a,c=[];(a=b.next())!==g;)c.push(a);return c},m.findFirst=function(){var a=b.next();return a===g?f.empty():f.ofNullable(a)},m.findLast=function(){for(var a,c;(a=b.next())!==g;)c=a;return c===g?f.empty():f.ofNullable(c)},m.forEach=function(a){for(var c;(c=b.next())!==g;)a.call(h,c)},m.min=function(a){a=a||i;for(var c,d=null;(c=b.next())!==g;)(null===d||a.call(h,c,d)<0)&&(d=c);return d},m.max=function(a){a=a||i;for(var c,d=null;(c=b.next())!==g;)(null===d||a.call(h,c,d)>0)&&(d=c);return d},m.sum=function(){for(var a,c=0;(a=b.next())!==g;)c+=a;return c},m.average=function(){for(var a,c=0,d=0;(a=b.next())!==g;)d+=a,c++;return d/c},m.count=function(){for(var a,c=0;(a=b.next())!==g;)c++;return c},m.allMatch=function(a){for(var c;(c=b.next())!==g;){var d=a.call(h,c);if(!d)return!1}return!0},m.anyMatch=function(a){for(var c;(c=b.next())!==g;){var d=a.call(h,c);if(d)return!0}return!1},m.noneMatch=function(a){for(var c;(c=b.next())!==g;){var d=a.call(h,c);if(d)return!1}return!0},m.collect=function(a){for(var c,d=a.supplier.call(h),e=!0;(c=b.next())!==g;)d=a.accumulator.call(h,d,c,e),e=!1;return a.finisher&&(d=a.finisher.call(h,d)),d},m.reduce=function(){var a=arguments[0],c=arguments[1];return c?b.collect({supplier:function(){return a},accumulator:c}):n(a)};var n=function(a){var c,d=b.next();if(d===g)return f.empty();for(;(c=b.next())!==g;)d=a.call(h,d,c);return f.ofNullable(d)};m.groupBy=function(a,c){return b.collect({supplier:function(){return c||{}},accumulator:function(b,c){var d=a.call(h,c);return b.hasOwnProperty(d)||(b[d]=[]),void 0===b[d]&&(b[d]=[]),b[d].push(c),b}})},m.indexBy=function(a,c,d){return b.collect({supplier:function(){return d||{}},accumulator:function(b,d){var e=a.call(h,d);if(b.hasOwnProperty(e)){if(!c)throw"duplicate mapping found for key: "+e;return b[e]=c.call(h,b[e],d),b}return b[e]=d,b}})},m.partitionBy=function(){var a=arguments[0];if(k(a))return o(a);if(l(a))return p(a);throw"partitionBy requires argument of type function or number"};var o=function(a){return b.collect({supplier:function(){return{}},accumulator:function(b,c){var d=a.call(h,c);return b.hasOwnProperty(d)||(b[d]=[]),b[d].push(c),b}})},p=function(a){return b.collect({supplier:function(){return[]},accumulator:function(b,c){if(0===b.length)return b.push([c]),b;var d=b[b.length-1];return d.length===a?(b.push([c]),b):(d.push(c),b)}})};m.joining=function(a){var c="",d="",e="";return a&&(c=a.prefix||c,d=a.suffix||d,e=a.delimiter||e),b.collect({supplier:function(){return""},accumulator:function(a,b,c){var d=c?"":e;return a+d+String(b)},finisher:function(a){return c+a+d}})};var q=!1,r=function(){if(q)throw"stream has already been operated upon"},s=function(a){return function(){try{return r(),a.apply(b,arguments)}finally{q=!0}}};for(var t in m)m.hasOwnProperty(t)&&(this[t]=s(m[t]))},d=function(a,b,c){this.prev=null,this.next=null,this.advance=function(){if(!j()&&null===this.prev)return g;if(!j())return this.prev.advance();var a=k();return null!==this.next?this.next.pipe(a):a},this.pipe=function(c){var d=a.call(h,c);return l(d,b),j()?(c=k(),null!==this.next?this.next.pipe(c):c):this.advance()};var d=null,e=!1,f=0,i=0,j=function(){return null===d?!1:e?i>f:!0},k=function(){var a;return e?(a=d[f],f++,f>=i&&(d=null,e=!1,f=0,i=0),a):(a=d,d=null,a)},l=function(a,b){d=a,e=b,e&&(i=d.length)};c&&l(c,b)},e=function(a){this.prev=null,this.next=null;var b=null,c=0;this.advance=function(){var d;if(null===b){for(b=[];(d=this.prev.advance())!==g;)if(c++,a.voter){var e=a.voter.call(h,d,c);if(!e)break}a.finisher&&a.finisher.call(h,b)}return 0===b.length?g:(d=b.shift(),null!==this.next?this.next.pipe(d):d)},this.pipe=function(d){a.consumer&&a.consumer.call(h,d,c);var e=!0;a.filter&&(e=a.filter.call(h,d,c,b)),e&&b.push(d)}},f=function(a){this.isPresent=function(){return null!==a&&void 0!==a},this.get=function(){if(!this.isPresent())throw"optional value is not present";return a},this.ifPresent=function(b){this.isPresent()&&b.call(a,a)},this.orElse=function(b){return this.isPresent()?a:b},this.orElseGet=function(b){return this.isPresent()?a:b.call(h)},this.orElseThrow=function(b){if(this.isPresent())return a;throw b},this.filter=function(b){if(this.isPresent()){var c=b.call(h,a);return c?this:f.empty()}return this},this.map=function(b){if(this.isPresent()){var c=b.call(h,a);return f.ofNullable(c)}return this},this.flatMap=function(b){return this.isPresent()?b.call(h,a):this}};f.of=function(a){if(null===a||void 0===a)throw"value must be present";return new f(a)},f.ofNullable=function(a){return new f(a)},f.empty=function(){return new f(void 0)};var g="END_OF_PIPE",h={},i=function(a,b){return a===b?0:a>b?1:-1},j=function(a,b){if(!k(a))throw b},k=function(a){return"function"==typeof a||!1},l=function(a){return"[object Number]"===Object.prototype.toString.call(a)},m=function(a){return new c(a)};m.range=function(a,b){for(var c=[],d=a;b>d;d++)c.push(d);return m(c)},m.rangeClosed=function(a,b){return m.range(a,b+1)},m.VERSION=b,m.Optional=f;var n=a.Stream;m.noConflict=function(){return a.Stream=n,m},a.Stream=m}(window);
//# sourceMappingURL=stream.min.js.map