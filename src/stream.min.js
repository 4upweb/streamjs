/*! Stream.js 2015-01-16 */

(function(){"use strict";var a=this,b="1.1.2",c={},d={},e=function(){};e.of=function(a){return y(a)?new f(a):z(a)?new g(a):new h(a)};var f=function(a){this.initialize(a)};f.prototype=new e,f.prototype.next=function(){if(this.origin>=this.fence)return d;try{return this.data[this.origin]}finally{this.origin++}},f.prototype.initialize=function(a){this.data=a||[],this.origin=0,this.fence=this.data.length};var g=function(a){this.initialize(a)};g.prototype=new e,g.prototype.initialize=function(a){this.data=a||{},this.keys=Object.keys(a),this.origin=0,this.fence=this.keys.length},g.prototype.next=function(){if(this.origin>=this.fence)return d;try{var a=this.keys[this.origin];return this.data[a]}finally{this.origin++}};var h=function(a){this.initialize(a)};h.prototype=new e,h.prototype.initialize=function(a){this.value=a,this.done=!1},h.prototype.next=function(){return this.done?d:(this.done=!0,this.value)};var i=function(){this.next=null,this.prev=null},j=function(a){this.iterator=e.of(a)};j.prototype=new i,j.prototype.advance=function(){var a=this.iterator.next();return a===d?a:null===this.next?a:this.next.pipe(a)};var k=function(a){this.fn=a};k.prototype=new i,k.prototype.advance=function(){return this.prev.advance()},k.prototype.pipe=function(a){var b=this.fn.call(c,a);return null===this.next?b:this.next.pipe(b)};var l=function(a){this.fn=a,this.iterator=null};l.prototype=new i,l.prototype.advance=function(){if(null===this.iterator)return this.prev.advance();var a=this.iterator.next();return a===d?(this.iterator=null,this.prev.advance()):null===this.next?a:this.next.pipe(a)},l.prototype.pipe=function(a){this.iterator=e.of(a);var b=this.iterator.next();return b===d?this.prev.advance():null===this.next?b:this.next.pipe(b)};var m=function(a){this.fn=a};m.prototype=new i,m.prototype.advance=function(){return this.prev.advance()},m.prototype.pipe=function(a){var b=this.fn.call(c,a);return b?null===this.next?a:this.next.pipe(a):this.prev.advance()};var n=function(a){this.prev=null,this.next=null,this.fn=a};n.prototype.advance=function(){var a=this.fn.call(c);return this.next.pipe(a)};var o=function(a){this.prev=null,this.next=null,this.filter=a.filter,this.finisher=a.finisher,this.buffer=null,this.i=0};o.prototype.advance=function(){var a;if(null===this.buffer){for(this.buffer=[];(a=this.prev.advance())!==d;)this.i++;this.finisher&&this.finisher.call(c,this.buffer)}return 0===this.buffer.length?d:(a=this.buffer.shift(),null!==this.next?this.next.pipe(a):a)},o.prototype.pipe=function(a){(!this.filter||this.filter.call(c,a,this.i,this.buffer))&&this.buffer.push(a)};var p=function(a){this.limit=a,this.i=0};p.prototype=new i,p.prototype.advance=function(){return this.prev.advance()},p.prototype.pipe=function(a){return this.i>=this.limit?d:(this.i++,null===this.next?a:this.next.pipe(a))};var q=function(a){this.skip=a,this.i=0};q.prototype=new i,q.prototype.advance=function(){return this.prev.advance()},q.prototype.pipe=function(a){return this.i<this.skip?(this.i++,this.prev.advance()):(this.i++,null===this.next?a:this.next.pipe(a))};var r=function(a){this.consumer=a};r.prototype=new i,r.prototype.advance=function(){return this.prev.advance()},r.prototype.pipe=function(a){return this.consumer.call(c,a),null===this.next?a:this.next.pipe(a)};var s=function(a){var b,e=this;b=w(a)?new n(function(){return a.call(c)}):new j(v(a)?a.split(""):a),this.add=function(a){if(null!==b){var c=b;a.prev=c,c.next=a}b=a},this.next=function(){return b.advance()},this.filter=function(a){return this.add(new m(a)),this},this.map=function(a){return this.add(new k(a)),this},this.flatMap=function(a){return this.add(new k(a)),this.add(new l),this},this.sorted=function(a){return this.add(new o({finisher:function(b){b.sort(a)}})),this},this.distinct=function(){return this.add(new o({filter:function(a,b,c){return c.indexOf(a)<0}})),this},this.skip=function(a){return this.add(new q(a)),this},this.limit=function(a){return this.add(new p(a)),this},this.peek=function(a){return this.add(new r(a)),this};var f={};f.toArray=function(){for(var a,b=[];(a=e.next())!==d;)b.push(a);return b},f.findFirst=function(){var a=e.next();return a===d?t.empty():t.ofNullable(a)},f.forEach=function(a){for(var b;(b=e.next())!==d;)a.call(c,b)},f.min=function(a){a=a||u;for(var b,f=null;(b=e.next())!==d;)(null===f||a.call(c,b,f)<0)&&(f=b);return t.ofNullable(f)},f.max=function(a){a=a||u;for(var b,f=null;(b=e.next())!==d;)(null===f||a.call(c,b,f)>0)&&(f=b);return t.ofNullable(f)},f.sum=function(){for(var a,b=0;(a=e.next())!==d;)b+=a;return b},f.average=function(){for(var a,b=0,c=0;(a=e.next())!==d;)c+=a,b++;return 0===c||0===b?t.empty():t.of(c/b)},f.count=function(){for(var a,b=0;(a=e.next())!==d;)b++;return b},f.allMatch=function(a){for(var b;(b=e.next())!==d;){var f=a.call(c,b);if(!f)return!1}return!0},f.anyMatch=function(a){for(var b;(b=e.next())!==d;){var f=a.call(c,b);if(f)return!0}return!1},f.noneMatch=function(a){for(var b;(b=e.next())!==d;){var f=a.call(c,b);if(f)return!1}return!0},f.collect=function(a){for(var b,f=a.supplier.call(c),g=!0;(b=e.next())!==d;)f=a.accumulator.call(c,f,b,g),g=!1;return a.finisher&&(f=a.finisher.call(c,f)),f},f.reduce=function(){var a=arguments[0],b=arguments[1];return b?e.collect({supplier:function(){return a},accumulator:b}):g(a)};var g=function(a){var b,f=e.next();if(f===d)return t.empty();for(;(b=e.next())!==d;)f=a.call(c,f,b);return t.ofNullable(f)};f.groupBy=function(a){return e.collect({supplier:function(){return{}},accumulator:function(b,d){var e=a.call(c,d);return b.hasOwnProperty(e)||(b[e]=[]),void 0===b[e]&&(b[e]=[]),b[e].push(d),b}})},f.toMap=function(a,b){return e.collect({supplier:function(){return{}},accumulator:function(d,e){var f=a.call(c,e);if(d.hasOwnProperty(f)){if(!b)throw"duplicate mapping found for key: "+f;return d[f]=b.call(c,d[f],e),d}return d[f]=e,d}})},f.partitionBy=function(){var a=arguments[0];if(w(a))return h(a);if(x(a))return i(a);throw"partitionBy requires argument of type function or number"};var h=function(a){return e.collect({supplier:function(){return{"true":[],"false":[]}},accumulator:function(b,d){var e=a.call(c,d);return b.hasOwnProperty(e)||(b[e]=[]),b[e].push(d),b}})},i=function(a){return e.collect({supplier:function(){return[]},accumulator:function(b,c){if(0===b.length)return b.push([c]),b;var d=b[b.length-1];return d.length===a?(b.push([c]),b):(d.push(c),b)}})};f.joining=function(a){var b="",c="",d="";return a&&(b=a.prefix||b,c=a.suffix||c,d=a.delimiter||d),e.collect({supplier:function(){return""},accumulator:function(a,b,c){var e=c?"":d;return a+e+String(b)},finisher:function(a){return b+a+c}})};var s=!1,y=function(a){return function(){try{if(s)throw"stream has already been operated upon";return a.apply(e,arguments)}finally{s=!0}}};for(var z in f)f.hasOwnProperty(z)&&(this[z]=y(f[z]));this.indexBy=this.toMap,this.partitioningBy=this.partitionBy,this.groupingBy=this.groupBy,this.each=this.forEach,this.toList=this.toArray,this.join=this.joining,this.avg=this.average,this.sort=this.sorted,this.size=this.count,this.findAny=this.findFirst};s.prototype.toString=function(){return"[object Stream]"};var t=function(a){this.isPresent=function(){return null!==a&&void 0!==a},this.get=function(){if(!this.isPresent())throw"optional value is not present";return a},this.ifPresent=function(b){this.isPresent()&&b.call(a,a)},this.orElse=function(b){return this.isPresent()?a:b},this.orElseGet=function(b){return this.isPresent()?a:b.call(c)},this.orElseThrow=function(b){if(this.isPresent())return a;throw b},this.filter=function(b){if(this.isPresent()){var d=b.call(c,a);return d?this:t.empty()}return this},this.map=function(b){if(this.isPresent()){var d=b.call(c,a);return t.ofNullable(d)}return this},this.flatMap=function(b){return this.isPresent()?b.call(c,a):this}};t.prototype.toString=function(){return"[object Optional]"},t.of=function(a){if(null===a||void 0===a)throw"value must be present";return new t(a)},t.ofNullable=function(a){return new t(a)},t.empty=function(){return new t(void 0)};var u=function(a,b){return a===b?0:a>b?1:-1},v=function(a){return"[object String]"===Object.prototype.toString.call(a)},w=function(a){return"function"==typeof a||!1},x=function(a){return"[object Number]"===Object.prototype.toString.call(a)},y=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},z=function(a){return"object"==typeof a&&!!a},A=function(a){return new s(a)};A.range=function(a,b){for(var c=[],d=a;b>d;d++)c.push(d);return A(c)},A.rangeClosed=function(a,b){return A.range(a,b+1)},A.of=function(){var a=Array.prototype.slice.call(arguments);return A(a)},A.generate=function(a){return A(a)},A.iterate=function(a,b){var d=!0,e=a;return A(function(){return d?(d=!1,a):e=b.call(c,e)})},A.empty=function(){return A([])},A.VERSION=b,A.Optional=t;var B=a.Stream;A.noConflict=function(){return a.Stream=B,A},"undefined"!=typeof module&&module.exports?module.exports=A:"function"==typeof define&&define.amd?define("streamjs",[],function(){return A}):a.Stream=A}).call(this);
//# sourceMappingURL=stream.min.js.map